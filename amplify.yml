version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm use 20
        - corepack enable                # <--- 1. Activa el gestor de versiones
        - yarn set version 3.2.1         # <--- 2. Instala Yarn 3 explÃ­citamente
        - yarn config set nodeLinker node-modules # <--- 3. Asegura compatibilidad
        - yarn install
    build:
      commands:
        - yarn build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*